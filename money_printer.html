<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Money Printer Calculator</title>
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&display=swap" rel="stylesheet" />
  <style>
    /* ================= åŸºç¡€æ ·å¼ ================= */
    :root {
      --primary: #00ffa3;
      --secondary: #6d6dff;
      --bg1: #141e30;
      --bg2: #243b55;
    }

    *,
    *::before,
    *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      min-height: 100vh;
      font-family: "Orbitron", sans-serif;
      background: linear-gradient(-45deg, var(--bg1), var(--bg2));
      background-size: 400% 400%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      color: #fff;
      animation: gradientMove 15s ease infinite;
      overflow: hidden;
    }

    @keyframes gradientMove {
      0% {
        background-position: 0% 50%;
      }
      50% {
        background-position: 100% 50%;
      }
      100% {
        background-position: 0% 50%;
      }
    }

    h1 {
      font-size: 2.5rem;
      margin-bottom: 0.5rem;
      text-shadow: 0 0 10px var(--primary), 0 0 20px var(--secondary);
    }

    .input-wrapper {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-bottom: 2rem;
    }

    .input-label {
      font-size: 1.25rem;
      white-space: nowrap;
    }

    .unit-label {
      font-size: 1.25rem;
      white-space: nowrap;
    }

    input[type="text"] {
      width: 320px;
      padding: 0.75rem 1rem;
      border: none;
      border-radius: 8px;
      font-size: 1.25rem;
      outline: none;
      color: #fff;
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      transition: background 0.3s;
    }

    input[type="number"]::placeholder {
      color: #ccc;
    }

    input[type="number"]:focus {
      background: rgba(255, 255, 255, 0.2);
    }

    #display {
      font-size: 3rem;
      font-weight: 700;
      letter-spacing: 2px;
      text-shadow: 0 0 10px var(--primary), 0 0 20px var(--secondary);
    }

    #displayRMB {
      font-size: 2rem;
      margin-top: 0.25rem;
      font-weight: 600;
      color: #ffd700;
      text-shadow: 0 0 10px var(--primary), 0 0 20px var(--secondary);
    }

    /* ================== Dollar Rain ================== */
    .dollar {
      position: absolute;
      top: -10vh;
      color: #00ff91;
      font-size: 24px;
      opacity: 0.8;
      animation: fall linear infinite;
    }

    @keyframes fall {
      0% {
        transform: translateY(-100vh) rotateZ(0deg);
        opacity: 0;
      }
      10% {
        opacity: 1;
      }
      90% {
        opacity: 1;
      }
      100% {
        transform: translateY(120vh) rotateZ(360deg);
        opacity: 0;
      }
    }

    /* æ—¶é’Ÿæ ·å¼ */
    .clock {
      font-size: 1.25rem;
      letter-spacing: 1px;
      margin-bottom: 0;
      text-shadow: 0 0 6px var(--secondary);
    }

    .time-wrapper {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-bottom: 1rem;
    }

    /* æŒ‰é’®æ ·å¼ */
    .btn-group {
      display: flex;
      gap: 1rem;
      margin-bottom: 2rem;
    }

    .action-btn {
      padding: 0.6rem 1.2rem;
      border: none;
      border-radius: 8px;
      font-size: 1rem;
      font-family: inherit;
      cursor: pointer;
      color: #fff;
      background: linear-gradient(45deg, var(--primary), var(--secondary));
      transition: transform 0.2s, opacity 0.2s;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
    }

    .action-btn:disabled {
      opacity: 0.4;
      cursor: not-allowed;
    }

    .action-btn:not(:disabled):active {
      transform: scale(0.95);
    }

    /* ç»“ç®—æ–‡å­— */
    .summary {
      margin-top: 1.5rem;
      font-size: 1.25rem;
      text-shadow: 0 0 6px var(--primary);
      line-height: 2; /* æ‹‰å¤§è¡Œè· */
      text-align: center; /* å±…ä¸­ */
    }

    .summary .mono {
      font-family: 'Courier New', monospace;
      font-variant-numeric: tabular-nums;
    }

    /* é€Ÿç‡ä¿¡æ¯ */
    .rate-info {
      margin-top: 1rem;
      font-size: 1rem;
      line-height: 1.6;
      text-align: center;
      font-family: 'Courier New', monospace;
      font-variant-numeric: tabular-nums;
    }

    /* æ–°å¢ï¼šå½“å‰èµšåˆ°çš„é’±åŒºåŸŸ */
    .earnings-display {
      margin-top: 2rem; /* ä¸ä¸Šæ–¹ç•™ç™½ */
      font-size: 1.5rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
  </style>
</head>
<body>
  <h1>ğŸ’µ Money Printer æé’±è®¡ç®—å™¨ğŸ’µ</h1>
  <!-- å®æ—¶æ—¶é’Ÿ -->
  <div class="time-wrapper">
    <span class="input-label">å½“å‰æ—¶é—´ï¼š</span>
    <div id="clock" class="clock">--:--:--</div>
  </div>

  <!-- æ“ä½œæŒ‰é’® -->
  <div class="btn-group">
    <button id="startBtn" class="action-btn">å¼€å§‹å·¥ä½œ</button>
    <button id="stopBtn" class="action-btn" disabled>ä¸‹ç­</button>
  </div>
  <div class="input-wrapper">
    <label for="salaryInput" class="input-label">ç›®æ ‡å¹´æ”¶å…¥</label>
    <input id="salaryInput" type="text" placeholder="400,000" />
    <span class="unit-label">ç¾åˆ€</span>
  </div>
    <!-- é€Ÿç‡ä¿¡æ¯ -->
    <div id="rateInfo" class="rate-info margin-bottom-60">
      <div id="rateSec"></div>
      <div id="rateMin"></div>
      <div id="rateHour"></div>
      <div id="rateDay"></div>
    </div>
    <div class="earnings-display">
      <span class="input-label">å½“å‰æåˆ°çš„é’±ï¼š</span>
      <span id="display">$0.00</span>
      <span id="displayRMB">Â¥0.00</span>
    </div>

  <!-- ç»“ç®—æ€»ç»“ -->
  <div id="summary" class="summary"></div>



  <!-- GSAP for smooth number animation -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <!-- confetti -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <script>
    // ================== æ ¸å¿ƒé€»è¾‘ ==================
    const salaryInput = document.getElementById("salaryInput");
    const displayUSD = document.getElementById("display");
    const displayRMB = document.getElementById("displayRMB");
    const clockEl = document.getElementById("clock");
    const startBtn = document.getElementById("startBtn");
    const stopBtn = document.getElementById("stopBtn");
    const summaryEl = document.getElementById("summary");
    const rateInfo = document.getElementById("rateInfo");
    const rateSecEl = document.getElementById("rateSec");
    const rateMinEl = document.getElementById("rateMin");
    const rateHourEl = document.getElementById("rateHour");
    const rateDayEl = document.getElementById("rateDay");

    let salaryPerSec = 0;
    let timer = null;
    let startTimestamp = null; // å•æ¬¡å¼€å§‹æ—¶é—´
    let accumEarnedUSD = 0;     // ç´¯è®¡æ”¶å…¥
    let accumDurationSec = 0;   // ç´¯è®¡æ—¶é•¿
    let rainTimer = null; // ç¾å…ƒé›¨å®šæ—¶å™¨

    /* ================= å®æ—¶æ—¶é’Ÿ ================= */
    function updateClock() {
      const now = new Date();
      const timeStr = now.toLocaleTimeString("zh-CN", { hour12: false });
      clockEl.textContent = timeStr;
    }
    updateClock();
    setInterval(updateClock, 1000);

    function updateEarnings() {
      const now = Date.now();
      const elapsedSec = (now - startTimestamp) / 1000;
      const currentEarned = accumEarnedUSD + elapsedSec * salaryPerSec;

      // æ›´æ–°æ–‡æœ¬
      const formattedUSD = "$" + currentEarned.toLocaleString("en-US", { minimumFractionDigits: 3, maximumFractionDigits: 3 });
      const rmbEarned = currentEarned * 7.2;
      const formattedRMB = "Â¥" + rmbEarned.toLocaleString("zh-CN", { minimumFractionDigits: 3, maximumFractionDigits: 3 });

      displayUSD.textContent = formattedUSD;
      displayRMB.textContent = formattedRMB;
    }

    function generateDollarRain() {
      const dollar = document.createElement("div");
      dollar.classList.add("dollar");
      dollar.textContent = "$";
      dollar.style.left = Math.random() * 100 + "vw";
      dollar.style.fontSize = 16 + Math.random() * 24 + "px";
      dollar.style.animationDuration = 3 + Math.random() * 5 + "s";
      document.body.appendChild(dollar);

      // æ¸…ç† DOM
      dollar.addEventListener("animationend", () => {
        dollar.remove();
      });
    }

    /* =============== æŒ‰é’®äº¤äº’ =============== */
    startBtn.addEventListener("click", () => {
      const salary = parseFloat(salaryInput.value.replace(/,/g, ""));
      if (!salary || salary <= 0) {
        alert("è¯·è¾“å…¥æœ‰æ•ˆçš„ç›®æ ‡å¹´è–ªï¼");
        return;
      }

      salaryPerSec = salary / (365 * 24 * 60 * 60);
      startTimestamp = Date.now();

      // æ›´æ–°é€Ÿç‡æ˜¾ç¤º
      updateRateDisplay(salaryPerSec);

      summaryEl.textContent = ""; // æ¸…ç©ºæ€»ç»“

      // è‹¥å·²å­˜åœ¨è®¡æ—¶å™¨å…ˆæ¸…é™¤
      if (timer) clearInterval(timer);
      updateEarnings(); // ç«‹å³æ›´æ–°ä¸€æ¬¡
      timer = setInterval(updateEarnings, 10); // 10ms çº§æ›´æ–°

      startBtn.disabled = true;
      stopBtn.disabled = false;

      // å¯åŠ¨ç¾å…ƒé›¨
      if (rainTimer) clearInterval(rainTimer);
      rainTimer = setInterval(generateDollarRain, 500);
    });

    stopBtn.addEventListener("click", () => {
      if (!timer) return;
      clearInterval(timer);
      timer = null;

      // åœæ­¢ç¾å…ƒé›¨
      if (rainTimer) {
        clearInterval(rainTimer);
        rainTimer = null;
      }

      // ç§»é™¤åœºä¸Šæ®‹ç•™çš„ dollar å…ƒç´ 
      document.querySelectorAll('.dollar').forEach(el => el.remove());

      // è®¡ç®—æœ€ç»ˆæ”¶ç›Š
      const sessionDurationSec = Math.floor((Date.now() - startTimestamp) / 1000);
      const sessionEarnedUSD = sessionDurationSec * salaryPerSec;
      const sessionEarnedRMB = sessionEarnedUSD * 7.2;

      // update accumulators
      accumDurationSec += sessionDurationSec;
      accumEarnedUSD += sessionEarnedUSD;

      const totalEarnedRMB = accumEarnedUSD * 7.2;

      const elapsedSecTotal = sessionDurationSec;
      const h = String(Math.floor(elapsedSecTotal / 3600)).padStart(2, "0");
      const m = String(Math.floor((elapsedSecTotal % 3600) / 60)).padStart(2, "0");
      const s = String(elapsedSecTotal % 60).padStart(2, "0");

      summaryEl.innerHTML = `
        <div>å·¥ä½œæ—¶é•¿: <span class="mono">${h}:${m}:${s}</span></div>
        <div>æœ¬æ¬¡å·¥ä½œå…±èµšå–ï¼š <span class="mono">$${sessionEarnedUSD.toLocaleString('en-US',{minimumFractionDigits:2,maximumFractionDigits:2})} (â‰ˆ Â¥${sessionEarnedRMB.toLocaleString('zh-CN',{minimumFractionDigits:2,maximumFractionDigits:2})})</span></div>
        <div>ç´¯è®¡æ”¶å…¥: <span class="mono">$${accumEarnedUSD.toLocaleString('en-US',{minimumFractionDigits:2,maximumFractionDigits:2})} (â‰ˆ Â¥${totalEarnedRMB.toLocaleString('zh-CN',{minimumFractionDigits:2,maximumFractionDigits:2})})</span></div>`;

      // æ’’èŠ±åº†ç¥
      confetti({
        particleCount: 200,
        spread: 70,
        origin: { y: 0.6 },
      });

      startBtn.disabled = false;
      stopBtn.disabled = true;
    });

    /* ============ è¾“å…¥æ¡†æ ¼å¼åŒ– ============ */
    function formatInput() {
      let raw = salaryInput.value.replace(/,/g, "").replace(/[^\d.]/g, "");
      if (raw) {
        const num = parseFloat(raw);
        salaryInput.value = num.toLocaleString("en-US");
        const perSecCalc = num / (365 * 24 * 60 * 60);
        updateRateDisplay(perSecCalc);
      } else {
        salaryInput.value = "";
        updateRateDisplay(0);
      }
    }
    salaryInput.addEventListener("input", formatInput);

    function updateRateDisplay(perSecUSD) {
      if (!perSecUSD || perSecUSD <= 0) {
        rateSecEl.textContent = '';
        rateMinEl.textContent = '';
        rateHourEl.textContent = '';
        rateDayEl.textContent = '';
        return;
      }

      const perMinUSD = perSecUSD * 60;
      const perHourUSD = perMinUSD * 60;
      const perDayUSD = perHourUSD * 24;

      const perSecRMB = perSecUSD * 7.2;
      const perMinRMB = perSecRMB * 60;
      const perHourRMB = perMinRMB * 60;
      const perDayRMB = perHourRMB * 24;

      const fmtUSD = (v)=>`$${v.toLocaleString('en-US',{minimumFractionDigits:3,maximumFractionDigits:3})}`;
      const fmtRMB = (v)=>`Â¥${v.toLocaleString('zh-CN',{minimumFractionDigits:3,maximumFractionDigits:3})}`;

      rateSecEl.textContent  = `æ¯ç§’èµšåˆ°:   ${fmtUSD(perSecUSD)}  (â‰ˆ ${fmtRMB(perSecRMB)})`;
      rateMinEl.textContent  = `æ¯åˆ†é’Ÿèµšåˆ°: ${fmtUSD(perMinUSD)}  (â‰ˆ ${fmtRMB(perMinRMB)})`;
      rateHourEl.textContent = `æ¯å°æ—¶èµšåˆ°: ${fmtUSD(perHourUSD)}  (â‰ˆ ${fmtRMB(perHourRMB)})`;
      rateDayEl.textContent  = `æ¯å¤©èµšåˆ°:   ${fmtUSD(perDayUSD)}  (â‰ˆ ${fmtRMB(perDayRMB)})`;
    }

    updateRateDisplay(0);
  </script>
</body>
</html> 